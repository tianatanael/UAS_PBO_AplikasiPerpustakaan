<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
</head>
<body>
    <header class="header">
        <div class="logo">
            <a href="/"><b>Jakarta</b>Pustaka</a>
        </div>
        <nav class="navigation">
            <ul>
                <li>Home</li>
                <li>About</li>
                <li>Contact</li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="searchBar">
            <input type="text" id="searchInput" class="form-control" placeholder="Cari Buku">
        </div>
        <table class="table table-bordered table-hover">
            {% for row in container %}
            <tr>
                <td>
                    
                </td>
            </tr>
            {% endfor %}
        </table>
    </main>
</body>
<script>
    var currentPage = 1;
    var itemsPerPage = 4;
    var totalRows = document.querySelectorAll('tbody tr').length;

    function displayData(page) {
        var startIndex = (page - 1) * itemsPerPage;
        var endIndex = startIndex + itemsPerPage;

        var rows = document.querySelectorAll('tbody tr');
        for (var i = 0; i < rows.length; i++) {
            if (i >= startIndex && i < endIndex) {
                rows[i].style.display = "";
            } else {
                rows[i].style.display = "none";
            }
        }
    }

    function updatePaginationButtons() {
            var totalPages = Math.ceil(totalRows / itemsPerPage);
            var page1 = document.getElementById('page1');
            var page2 = document.getElementById('page2');
            var page3 = document.getElementById('page3');

            if (currentPage <= 3) {
                page1.innerHTML = '<button class="page-link btn btn-link">1</button>';
                page2.innerHTML = '<button class="page-link btn btn-link">2</button>';
                page3.innerHTML = '<button class="page-link btn btn-link">3</button>';
            } else {
                page1.innerHTML = '<button class="page-link btn btn-link">' + (currentPage - 1) + '</button>';
                page2.innerHTML = '<button class="page-link btn btn-link">' + currentPage + '</button>';
                page3.innerHTML = '<button class="page-link btn btn-link">' + (currentPage + 1) + '</button>';
            }
        }

        displayData(currentPage);
        updatePaginationButtons();

        document.getElementById('previous').addEventListener('click', function() {
            if (currentPage > 1) {
                currentPage--;
                displayData(currentPage);
                updatePaginationButtons();
            }
        });

        document.getElementById('next').addEventListener('click', function() {
            if (currentPage < Math.ceil(totalRows / itemsPerPage)) {
                currentPage++;
                displayData(currentPage);
                updatePaginationButtons();
            }
        });

        document.getElementById('page1').addEventListener('click', function() {
            currentPage = parseInt(this.textContent);
            displayData(currentPage);
            updatePaginationButtons();
        });

        document.getElementById('page2').addEventListener('click', function() {
            currentPage = parseInt(this.textContent);
            displayData(currentPage);
            updatePaginationButtons();
        });

        document.getElementById('page3').addEventListener('click', function() {
            currentPage = parseInt(this.textContent);
            displayData(currentPage);
            updatePaginationButtons();
        });

    // Fungsi pencarian
    document.getElementById('searchInput').addEventListener('keyup', function() {
        var searchText = this.value.toLowerCase();
        var rows = document.querySelectorAll('tbody tr');
        for (var i = 0; i < rows.length; i++) {
            var rowText = rows[i].textContent.toLowerCase();
            if (rowText.includes(searchText)) {
                rows[i].style.display = "";
            } else {
                rows[i].style.display = "none";
            }
        }
        currentPage = 1; // Reset ke halaman pertama setelah pencarian
        updatePaginationButtons();
    });
</script>
</html>